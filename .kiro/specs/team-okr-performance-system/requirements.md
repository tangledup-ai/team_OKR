# 需求文档

## 简介

团队OKR任务看板和绩效得分系统是一个综合性的团队管理平台，用于跟踪任务进度、计算团队和个人绩效得分，并生成月度报告。系统支持多部门协作，任务状态管理，以及基于难度和评价的智能评分机制。

## 术语表

- **系统 (System)**: 团队OKR任务看板和绩效得分系统
- **管理员 (Admin)**: 具有完整系统权限的用户，可以注册团队成员、填写工作小时、查看月度报告
- **团队成员 (Team Member)**: 注册用户，可以查看团队任务、完成任务、评价其他成员
- **任务 (Task)**: 可分配给团队成员的工作项，具有状态、难度分值和负责人
- **任务状态 (Task Status)**: 任务的四种状态之一：未完成、进行中、完成、推迟
- **负责人 (Owner)**: 任务的主要负责人，获得该任务50%的分值
- **协作者 (Collaborator)**: 任务的其他参与者，平分剩余50%的分值
- **难度分值 (Difficulty Score)**: 任务创建时设定的难度评分，难度越高分值越高
- **任务评分 (Task Rating)**: 任务完成后其他成员和管理员给予的评分，占最终分值的30%
- **部门 (Department)**: 团队成员所属的组织单位，包括硬件部门、软件部门、市场部门
- **部门OKR分值 (Department OKR Score)**: 部门所有成员完成任务累积的总分值
- **个人绩效分值 (Personal Performance Score)**: 综合多个维度计算的个人评分，包括工作小时、完成任务比例、难度平均分、他人评分等
- **月度报告 (Monthly Report)**: 每月生成的综合报告，展示个人排名、部门表现、评价等信息
- **匿名评价 (Anonymous Review)**: 团队成员可以选择匿名方式对任务或其他成员进行评价

## 需求

### 需求 1

**用户故事:** 作为管理员，我想要注册和管理团队成员，以便建立完整的团队组织结构。

#### 验收标准

1. WHEN 管理员创建新团队成员账户 THEN 系统 SHALL 要求输入成员姓名、邮箱、密码和所属部门
2. WHEN 管理员选择部门 THEN 系统 SHALL 提供硬件部门、软件部门、市场部门三个选项
3. WHEN 团队成员账户创建成功 THEN 系统 SHALL 生成唯一的成员ID并发送登录凭证
4. WHEN 管理员查看成员列表 THEN 系统 SHALL 显示所有成员的姓名、部门、注册日期和状态
5. WHEN 管理员修改成员信息 THEN 系统 SHALL 更新成员数据并记录修改历史

### 需求 2

**用户故事:** 作为团队成员，我想要登录系统并查看团队任务，以便了解当前的工作安排。

#### 验收标准

1. WHEN 团队成员输入正确的邮箱和密码 THEN 系统 SHALL 验证凭证并授予访问权限
2. WHEN 团队成员登录成功 THEN 系统 SHALL 显示该成员可见的所有团队任务
3. WHEN 团队成员查看任务列表 THEN 系统 SHALL 按照任务状态分组显示任务
4. WHEN 团队成员查看任务详情 THEN 系统 SHALL 显示任务标题、描述、难度分值、负责人、协作者和当前状态
5. IF 登录凭证无效 THEN 系统 SHALL 拒绝访问并提示错误信息

### 需求 3

**用户故事:** 作为管理员或任务创建者，我想要创建任务并设置难度分值和变现金额，以便合理分配工作和评估任务价值。

#### 验收标准

1. WHEN 创建新任务 THEN 系统 SHALL 要求输入任务标题、描述、难度分值、变现金额、负责人和协作者列表
2. WHEN 设置难度分值 THEN 系统 SHALL 接受1到10之间的整数值，数值越高表示难度越大
3. WHEN 输入变现金额 THEN 系统 SHALL 接受非负数值，表示该任务预期或实际产生的收入金额
4. WHEN 指定负责人 THEN 系统 SHALL 从团队成员列表中选择一个成员作为主要负责人
5. WHEN 添加协作者 THEN 系统 SHALL 允许选择零个或多个团队成员作为协作者
6. WHEN 任务创建成功 THEN 系统 SHALL 将任务状态设置为"未完成"并通知相关成员

### 需求 4

**用户故事:** 作为团队成员，我想要拖拽任务卡片改变状态，以便直观地更新任务进度。

#### 验收标准

1. WHEN 团队成员拖拽任务卡片到"进行中"列 THEN 系统 SHALL 更新任务状态为"进行中"并记录开始时间
2. WHEN 团队成员拖拽任务卡片到"完成"列 THEN 系统 SHALL 更新任务状态为"完成"并记录完成时间
3. WHEN 团队成员拖拽任务卡片到"推迟"列 THEN 系统 SHALL 更新任务状态为"推迟"并要求输入推迟原因
4. WHEN 任务状态改变 THEN 系统 SHALL 实时更新看板显示并通知相关成员
5. WHEN 团队成员拖拽任务 THEN 系统 SHALL 仅允许任务负责人或协作者修改任务状态

### 需求 5

**用户故事:** 作为系统，我想要根据任务难度和参与角色自动计算分值分配，以便公平地奖励团队成员的贡献。

#### 验收标准

1. WHEN 任务完成 THEN 系统 SHALL 将难度分值的50%分配给负责人
2. WHEN 任务有多个协作者 THEN 系统 SHALL 将难度分值的50%平均分配给所有协作者
3. WHEN 任务只有负责人没有协作者 THEN 系统 SHALL 将难度分值的100%分配给负责人
4. WHEN 计算分值分配 THEN 系统 SHALL 保留两位小数精度
5. WHEN 分值分配完成 THEN 系统 SHALL 更新每个参与者的累积分值和部门OKR分值

### 需求 6

**用户故事:** 作为团队成员，我想要对已完成的任务进行评分和评论，以便提供反馈并影响最终分值。

#### 验收标准

1. WHEN 任务状态为"完成" THEN 系统 SHALL 允许其他团队成员对该任务进行评分
2. WHEN 团队成员评分 THEN 系统 SHALL 接受1到10之间的评分值
3. WHEN 团队成员添加评论 THEN 系统 SHALL 提供匿名选项让成员选择是否公开身份
4. WHEN 管理员评分 THEN 系统 SHALL 记录管理员评分并赋予更高权重
5. WHEN 收集所有评分 THEN 系统 SHALL 计算平均评分并将其作为任务最终分值的30%调整因子

### 需求 7

**用户故事:** 作为系统，我想要综合多个维度计算个人绩效分值，以便全面评估团队成员的表现。

#### 验收标准

1. WHEN 计算个人绩效分值 THEN 系统 SHALL 包含工作小时、完成任务比例、难度平均分、部门平均分和他人评分五个维度
2. WHEN 管理员输入工作小时 THEN 系统 SHALL 记录该成员当月的工作时长并纳入绩效计算
3. WHEN 计算完成任务比例 THEN 系统 SHALL 用已完成任务数除以分配给该成员的总任务数
4. WHEN 计算难度平均分 THEN 系统 SHALL 对该成员完成的所有任务的难度分值求平均
5. WHEN 计算部门平均分 THEN 系统 SHALL 用部门OKR分值除以部门成员数量
6. WHEN 计算他人评分 THEN 系统 SHALL 汇总该成员收到的所有任务评分和月度评价的平均值
7. WHEN 生成最终绩效分值 THEN 系统 SHALL 按照预定权重公式综合所有维度得出总分

### 需求 8

**用户故事:** 作为管理员，我想要查看月度报告看板，以便了解团队整体表现和个人排名。

#### 验收标准

1. WHEN 管理员访问月度报告 THEN 系统 SHALL 显示当前月份的综合报告数据
2. WHEN 显示个人排名 THEN 系统 SHALL 按照个人绩效分值从高到低排序所有团队成员
3. WHEN 显示部门表现 THEN 系统 SHALL 展示每个部门的OKR分值、完成任务数和平均难度分
4. WHEN 显示个人详情 THEN 系统 SHALL 包含工作小时、完成任务比例、难度平均分、他人评分排名和评价摘要
5. WHEN 月度报告生成 THEN 系统 SHALL 自动归档上月数据并初始化新月份的统计

### 需求 9

**用户故事:** 作为团队成员，我想要在每月月底进行自我评价和给其他成员评价，以便全面反映个人表现并影响月度报告。

#### 验收标准

1. WHEN 团队成员提交自我评价 THEN 系统 SHALL 要求输入企业文化理解（分值、文字、选项）、团队契合度（选项、文字、其他员工排名）、本月成长（分值、文字、选项）、本月最大贡献（分值、文字、选项）
2. WHEN 团队成员评价其他成员 THEN 系统 SHALL 要求输入评分、排名和文字评论
3. WHEN 团队成员选择匿名评价他人 THEN 系统 SHALL 隐藏评价者身份仅向管理员显示
4. WHEN 团队成员提交团队契合度排名 THEN 系统 SHALL 验证排名列表包含除自己外的所有团队成员且无重复
5. WHEN 所有成员完成月度评价 THEN 系统 SHALL 将评价数据纳入个人绩效分值计算

### 需求 11

**用户故事:** 作为管理员，我想要查看所有成员的月度评价并给出最终评价，以便综合判断并影响最终绩效分值。

#### 验收标准

1. WHEN 管理员查看月度报告 THEN 系统 SHALL 显示所有成员的自我评价、他人评价和初步计算的绩效分值
2. WHEN 管理员对成员进行最终评价 THEN 系统 SHALL 要求输入最终评分和评价文字
3. WHEN 管理员提交最终评价 THEN 系统 SHALL 重新计算该成员的最终绩效分值并更新排名
4. WHEN 管理员修改最终评价 THEN 系统 SHALL 记录修改历史并更新相关分值
5. WHEN 所有管理员评价完成 THEN 系统 SHALL 生成完整的月度报告并归档

### 需求 10

**用户故事:** 作为系统，我想要实现合理的绩效分值算法，以便准确反映团队成员的综合能力和贡献。

#### 验收标准

1. WHEN 计算个人绩效分值 THEN 系统 SHALL 综合工作小时、完成任务比例、难度平均分、变现金额、部门平均分、任务评分、企业文化理解、团队契合度、本月成长、本月最大贡献、他人评价和管理员最终评分
2. WHEN 设定基础维度权重 THEN 系统 SHALL 为工作小时分配10%权重、完成任务比例15%权重、难度平均分10%权重、变现金额10%权重、部门平均分5%权重、任务评分10%权重
3. WHEN 设定月度评价维度权重 THEN 系统 SHALL 为企业文化理解5%权重、团队契合度3%权重、本月成长3%权重、本月最大贡献4%权重、他人评价5%权重、管理员最终评分15%权重
4. WHEN 任务被推迟 THEN 系统 SHALL 对该任务的分值应用惩罚系数降低最终得分
5. WHEN 标准化工作小时 THEN 系统 SHALL 将工作小时转换为0到10的标准分数，以每月300小时为满分基准
6. WHEN 标准化完成任务比例 THEN 系统 SHALL 将完成率转换为0到10的分数，100%完成率为满分10分


7. WHEN 标准化难度平均分 THEN 系统 SHALL 直接使用1到10的难度分值平均值
8. WHEN 标准化任务评分 THEN 系统 SHALL 计算该成员完成任务收到的所有评分平均值
9. WHEN 标准化变现金额 THEN 系统 SHALL 计算该成员完成任务的变现金额总和，并映射到0到10的分数区间
10. WHEN 标准化月度评价分值 THEN 系统 SHALL 将各维度的1到10分值直接使用
11. WHEN 标准化他人评价 THEN 系统 SHALL 计算该成员收到的所有他人评价的评分和排名的综合分数
12. WHEN 应用管理员最终评分 THEN 系统 SHALL 将管理员评分作为独立维度纳入最终计算
13. WHEN 生成最终分值 THEN 系统 SHALL 确保分值范围在0到100之间并保留两位小数
