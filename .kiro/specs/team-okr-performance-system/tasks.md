# 实施计划

- [x] 1. 项目初始化和环境配置
  - 创建Django项目结构
  - 配置Docker和Docker Compose
  - 设置PostgreSQL数据库连接
  - 配置Django settings（开发和生产环境）
  - 安装必要的依赖包（Django REST Framework、drf-yasg、django-admin-interface、djangorestframework-simplejwt等）
  - _需求: 所有需求的基础_

- [x] 2. 实现用户模型和认证系统
  - 创建自定义User模型（继承AbstractUser）
  - 实现部门枚举（硬件、软件、市场）
  - 配置JWT认证
  - 实现用户注册API（管理员功能）
  - 实现用户登录API
  - 实现用户列表和详情API
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 2.1, 2.5_

- [x] 3. 配置Django Admin管理界面
  - 安装和配置django-admin-interface
  - 注册User模型到Admin
  - 自定义User Admin界面（列表显示、过滤、搜索）
  - 配置Admin权限控制
  - _需求: 1.1, 1.4_

- [x] 4. 实现任务模型和基础API
  - 创建Task模型（包含难度分值和变现金额）
  - 创建TaskStatus枚举
  - 实现任务创建API
  - 实现任务列表API（支持按状态过滤）
  - 实现任务详情API
  - 实现任务更新API
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 2.2, 2.3, 2.4_

- [x] 5. 实现任务状态管理
  - 实现任务状态转换API
  - 添加状态转换时间戳记录（started_at, completed_at, postponed_at）
  - 实现推迟状态的原因验证
  - 实现任务修改权限检查（只有负责人和协作者可修改）
  - _需求: 4.1, 4.2, 4.3, 4.5_

- [x] 6. 实现任务分值分配系统
  - 创建ScoreDistribution和ScoreAllocation模型
  - 实现分值分配计算逻辑（负责人50%，协作者平分50%）
  - 实现单人任务100%分值分配
  - 实现推迟任务惩罚系数
  - 实现分值精度控制（两位小数）
  - 实现累积分值更新
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 10.4_

- [x] 7. 实现任务评价系统
  - 创建Review模型（支持任务评价和月度评价）
  - 实现任务评价提交API
  - 实现评分范围验证（1-10）
  - 实现匿名评价功能
  - 实现管理员评价权重
  - 实现任务评分平均值计算
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 8. 实现月度综合评价系统
  - 创建MonthlyEvaluation模型（自我评价）
  - 创建PeerEvaluation模型（他人评价）
  - 实现自我评价提交API（企业文化理解、团队契合度、本月成长、本月最大贡献）
  - 实现团队契合度排名验证
  - 实现他人评价提交API（评分、排名、文字）
  - 实现匿名评价功能
  - _需求: 9.1, 9.2, 9.3, 9.4, 9.5_

- [x] 9. 实现管理员最终评价功能
  - 实现管理员查看所有成员月度评价API
  - 实现管理员提交最终评价API
  - 实现最终评价修改历史记录
  - 实现评价完成后触发分值重新计算
  - _需求: 11.1, 11.2, 11.3, 11.4_

- [x] 10. 实现工作小时记录系统
  - 创建WorkHours模型
  - 实现工作小时录入API（管理员功能）
  - 实现工作小时查询API
  - 实现月度工作小时统计
  - _需求: 7.2_

- [x] 11. 实现绩效分值计算引擎
  - 创建PerformanceScore模型
  - 实现工作小时标准化函数（300小时满分）
  - 实现完成任务比例标准化函数
  - 实现难度平均分计算
  - 实现变现金额标准化函数
  - 实现部门平均分计算
  - 实现任务评分标准化
  - 实现月度评价各维度标准化
  - 实现他人评价综合分数计算
  - 实现加权平均公式（12个维度）
  - 实现最终分值范围和精度控制（0-100，两位小数）
  - _需求: 7.1, 7.3, 7.4, 7.5, 7.6, 7.7, 10.1, 10.2, 10.3, 10.5, 10.6, 10.7, 10.8, 10.9, 10.10, 10.11, 10.12, 10.13_

- [x] 12. 实现月度报告生成系统
  - 创建MonthlyReport和DepartmentReport模型
  - 实现月度报告生成逻辑
  - 实现个人排名计算
  - 实现部门统计计算
  - 实现月度报告查询API
  - 实现个人报告查询API
  - 实现部门报告查询API
  - 实现数据归档功能
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.5, 11.5_

- [x] 13. 配置Admin管理功能
  - 注册所有模型到Django Admin
  - 自定义Task Admin（支持状态筛选、负责人筛选）
  - 自定义WorkHours Admin（支持批量录入）
  - 自定义MonthlyEvaluation Admin（查看所有评价）
  - 自定义PerformanceScore Admin（查看排名和分值）
  - 自定义MonthlyReport Admin（查看和导出报告）
  - 配置Admin界面美化（django-admin-interface）
  - _需求: 所有管理员相关需求_

- [x] 14. 实现Swagger API文档
  - 配置drf-yasg
  - 为所有API添加文档注释
  - 配置API分组和标签
  - 添加请求/响应示例
  - _需求: 所有API需求_

- [x] 15. 实现前端任务看板
  - 创建React项目结构
  - 实现用户登录页面
  - 实现任务看板组件（四列布局：未完成、进行中、完成、推迟）
  - 实现拖拽功能（React DnD）
  - 实现任务卡片组件
  - 实现任务创建表单
  - 实现任务详情模态框
  - _需求: 2.2, 2.3, 2.4, 3.1, 4.1, 4.2, 4.3_

- [x] 16. 实现前端评价功能
  - 实现任务评价表单
  - 实现月度自我评价表单
  - 实现他人评价表单
  - 实现匿名选项
  - 实现团队契合度排名拖拽组件
  - _需求: 6.1, 6.2, 6.3, 9.1, 9.2, 9.3_

- [x] 17. 实现前端月度报告页面
  - 实现月度报告总览页面
  - 实现个人报告详情页面
  - 实现部门报告页面
  - 实现排名展示组件
  - 实现评价展示组件
  - 实现管理员评价表单（仅管理员可见）
  - _需求: 8.1, 8.2, 8.3, 8.4, 11.1, 11.2_

- [x] 18. Docker配置和部署
  - 编写Dockerfile（后端）
  - 编写Dockerfile（前端）
  - 编写docker-compose.yml
  - 配置环境变量
  - 配置数据库连接
  - 配置静态文件服务
  - 编写启动脚本
  - _需求: 所有需求的部署基础_

- [ ] 19. 数据库迁移和初始化
  - 生成所有模型的迁移文件
  - 执行数据库迁移
  - 创建超级管理员账户
  - 创建测试数据（可选）
  - _需求: 所有需求的数据基础_

- [ ]* 20. 最终测试和验证
  - 测试用户注册和登录流程
  - 测试任务创建和状态转换
  - 测试分值分配计算
  - 测试评价提交
  - 测试月度报告生成
  - 测试绩效分值计算
  - 测试Admin管理功能
  - 验证所有API端点
  - 验证前端功能
  - _需求: 所有需求_
